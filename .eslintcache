[{"/Users/yanjie/git/fake/rwb-player/src/index.tsx":"1","/Users/yanjie/git/fake/rwb-player/src/reportWebVitals.ts":"2","/Users/yanjie/git/fake/rwb-player/src/App.tsx":"3","/Users/yanjie/git/fake/rwb-player/src/pages/loginUser/loginUser.tsx":"4","/Users/yanjie/git/fake/rwb-player/src/pages/payMoney/payMoney.tsx":"5","/Users/yanjie/git/fake/rwb-player/src/pages/auth/auth.tsx":"6"},{"size":500,"mtime":1609835470803,"results":"7","hashOfConfig":"8"},{"size":425,"mtime":1609835470805,"results":"9","hashOfConfig":"8"},{"size":1319,"mtime":1609898043515,"results":"10","hashOfConfig":"8"},{"size":3103,"mtime":1609904198792,"results":"11","hashOfConfig":"8"},{"size":3831,"mtime":1609915512401,"results":"12","hashOfConfig":"8"},{"size":3308,"mtime":1609899802522,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1twnnpf",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21","usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"24","usedDeprecatedRules":"16"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"16"},"/Users/yanjie/git/fake/rwb-player/src/index.tsx",[],["31","32"],"/Users/yanjie/git/fake/rwb-player/src/reportWebVitals.ts",[],"/Users/yanjie/git/fake/rwb-player/src/App.tsx",["33","34","35","36","37","38"],"import React, { createContext, useContext, useState } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  BrowserRouter\n} from \"react-router-dom\";\nimport 'antd/dist/antd.css';\nimport './App.css';\nimport LoginUser from './pages/loginUser/loginUser'\nimport PayMoney from './pages/payMoney/payMoney'\nimport { Spin, Space } from 'antd';\nimport { ProvideAuth, PrivateRoute } from './pages/auth/auth'\n\n\nfunction App() {\n  const [loading, setLoading] = useState(false)\n\n  return (\n    <div className=\"App\">\n      <ProvideAuth>\n        <Router>\n          <div>\n            {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n            <Switch>\n              <Route path=\"/player/loginuser\">\n                <LoginUser />\n              </Route>\n              <PrivateRoute path=\"/player/paymoney\">\n                <PayMoney />\n              </PrivateRoute>\n\n              {/* <Route path=\"/\">\n                <Redirect\n                  to=\"/loginuser\"\n                />\n              </Route> */}\n            </Switch>\n            {loading && (<div className=\"loading\">\n              <Spin size=\"large\" />\n            </div>)}\n          </div>\n        </Router>\n      </ProvideAuth>\n    </div>\n  );\n}\n\nexport default App;\n","/Users/yanjie/git/fake/rwb-player/src/pages/loginUser/loginUser.tsx",["39","40","41","42","43","44","45","46","47","48","49"],"import { Form, Input, Button, Checkbox, message, Row, Col } from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport './login.css';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useHistory,\n    Redirect\n} from \"react-router-dom\";\nimport axios from 'axios'\nimport { useState, useEffect } from 'react';\n\n\nconst Login = () => {\n    let history = useHistory()\n    let params = new URL(document.location.href).searchParams\n    const appid = params.get('appid')\n    const r = params.get('r')\n    useEffect(() => {\n        if (appid == null) {\n            message.error('缺少appid')\n        }\n        if (r == null) {\n            message.error('缺少r')\n        }\n    }, [])\n\n    const onFinish = ({ username, password }: { username: string, password: string }) => {\n        let data = new FormData()\n        data.append('name', username)\n        data.append('password', password)\n        data.append('appid', appid || '')\n        axios({\n            method: 'post',\n            url: '/tasks/loginuser',\n            data,\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        }).then(res => {\n            // console.log(res.data)\n            if (res.data) {\n                if (res.data.code !== 0) {\n                    message.error(res.data.result)\n                } else if (res.data.code === 0) {\n                    document.location.href = `${r}?uid=${res.data.result}`\n                }\n            }\n        })\n    };\n\n    return (\n        <Form\n            name=\"normal_login\"\n            className=\"login-form\"\n            initialValues={{ remember: true }}\n            onFinish={onFinish}\n        >\n            <Form.Item\n                name=\"username\"\n                rules={[{ required: true, message: '请输入您的账号!' }]}\n            >\n                <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"账号\" />\n            </Form.Item>\n            <Form.Item\n                name=\"password\"\n                rules={[{ required: true, message: '请输入您的密码!' }]}\n            >\n                <Input\n                    prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                    type=\"password\"\n                    placeholder=\"密码\"\n                />\n            </Form.Item>\n\n            {/* <Form.Item>\n                <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\n                    <Checkbox>Remember me</Checkbox>\n                </Form.Item>\n\n                <a className=\"login-form-forgot\" href=\"\">\n                    Forgot password\n            </a>\n            </Form.Item> */}\n\n            <Form.Item>\n                <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n                    登陆/注册\n            </Button>\n                <p style={{ color: 'red' }}>请使用固定的账号密码登陆，新账号将自动注册并登陆!</p>\n                {/* Or <a href=\"\">register now!</a> */}\n            </Form.Item>\n        </Form>\n    )\n}\n\nexport default Login","/Users/yanjie/git/fake/rwb-player/src/pages/payMoney/payMoney.tsx",["50","51","52","53","54","55","56","57","58","59","60","61"],"import { Form, Input, Button, Checkbox, message, Row, Col } from 'antd';\nimport { UserOutlined, LockOutlined, PhoneOutlined, MoneyCollectOutlined } from '@ant-design/icons';\nimport './login.css';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useHistory,\n    Redirect\n} from \"react-router-dom\";\nimport axios from 'axios'\nimport { useState, useEffect } from 'react';\n\nfunction getCookie(name: string) {\n    var match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\n    if (match) return match[2];\n    return ''\n}\n\nconst Login = () => {\n    let history = useHistory()\n    let [availableMoney, setAvailableMoney] = useState('0')\n    useEffect(() => {\n        axios({\n            method: 'post',\n            url: '/tasks/playermoney',\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        }).then(res => {\n            // console.log(res.data)\n            if (res.data) {\n                if (res.data.code !== 0) {\n                    message.error(res.data.result)\n                } else if (res.data.code === 0) {\n                    setAvailableMoney((res.data.result / 100).toFixed(2))\n                }\n            }\n        })\n    })\n\n    const onFinish = ({ phone, cash }: { phone: string, cash: string }) => {\n        let data = new FormData()\n        data.append('phone', phone)\n        data.append('cash', Math.floor(parseFloat(cash) * 100) + '')\n        axios({\n            method: 'post',\n            url: '/tasks/moneypay',\n            data,\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        }).then(res => {\n            // console.log(res.data)\n            if (res.data) {\n                if (res.data.code !== 0) {\n                    message.error(res.data.result)\n                } else if (res.data.code === 0) {\n                    message.success('申请成功，24小时内到账')\n                    setAvailableMoney((res.data.result / 100).toFixed(2))\n                }\n            }\n        })\n    };\n\n    return (\n        <Form\n            name=\"normal_login\"\n            className=\"login-form\"\n            initialValues={{ remember: true }}\n            onFinish={onFinish}\n        >\n            <Form.Item\n                name=\"money\"\n                label=\"可提现金额\"\n            >\n                <span>{availableMoney}元</span>\n            </Form.Item>\n            <Form.Item\n                name=\"phone\"\n                rules={[{ required: true, message: '请输入您的手机号!' }]}\n            >\n                <Input prefix={<PhoneOutlined className=\"site-form-item-icon\" />} placeholder=\"手机号\" />\n            </Form.Item>\n            <Form.Item\n                name=\"cash\"\n                rules={[{ required: true, message: '请输入您的提现金额!' }]}\n            >\n                <Input\n                    prefix={<MoneyCollectOutlined className=\"site-form-item-icon\" />}\n                    placeholder=\"提现金额\"\n                />\n            </Form.Item>\n\n            {/* <Form.Item>\n                <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\n                    <Checkbox>Remember me</Checkbox>\n                </Form.Item>\n\n                <a className=\"login-form-forgot\" href=\"\">\n                    Forgot password\n            </a>\n            </Form.Item> */}\n\n            <Form.Item>\n                <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n                    提现\n            </Button>\n                <p style={{ color: 'red' }}>请开启：微信-我-支付-右上角三个点-允许通过手机号向我转账，否则无法到账！</p>\n                {/* Or <a href=\"\">register now!</a> */}\n            </Form.Item>\n        </Form>\n    )\n}\n\nexport default Login","/Users/yanjie/git/fake/rwb-player/src/pages/auth/auth.tsx",["62","63","64","65","66"],"import React, { createContext, useEffect, useContext, useState } from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useHistory,\n    Redirect\n} from \"react-router-dom\";\nimport axios from 'axios';\n\nfunction getCookie(name: string) {\n    var match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\n    if (match) return match[2];\n    return ''\n}\n\nconst authContext = createContext<{ user: string, signin: Function, loginUser: Function }>({\n    user: getCookie('player'),\n    signin: () => { },\n    loginUser: () => { }\n});\n\nconst useAuth = () => {\n    return useContext(authContext)\n}\n\nconst ProvideAuth = ({ children }: { children: React.ReactNode }) => {\n    const auth = useProvideAuth()\n\n    axios.interceptors.response.use(function (response) {\n\n        // Any status code that lie within the range of 2xx cause this function to trigger\n        // Do something with response data\n        return response;\n    }, function (error) {\n        if (error.response.status === 401) {\n            auth.signout()\n        }\n        return Promise.reject(error);\n    });\n\n    return (\n        <authContext.Provider value={auth}>\n            {children}\n        </authContext.Provider>\n    )\n}\n\nconst useProvideAuth = () => {\n    const [user, setUser] = useState(getCookie('player'));\n\n    const signin = (username: string, password: string, captcha: string, success: Function, fail: Function) => {\n        let data = new FormData()\n        data.append('name', username)\n        data.append('password', password)\n        data.append('captcha', captcha)\n        axios({\n            method: 'post',\n            url: '/tasks/login',\n            data,\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        }).then(res => {\n            // console.log(res.data)\n            if (res.data === 'Success') {\n                setUser(username);\n                success()\n            }\n        }).catch(rej => {\n            if (rej.response.status === 401) {\n                setUser('');\n                fail(rej.response.data)\n            }\n        })\n    };\n\n    const signout = () => {\n        setUser('')\n    }\n    const loginUser = (u: string) => {\n        setUser(u)\n    }\n\n    return {\n        user,\n        signin,\n        signout,\n        loginUser\n    };\n}\n\ninterface Props {\n    children: React.ReactNode;\n    path?: string;\n    elementType?: keyof JSX.IntrinsicElements;\n}\n\nfunction PrivateRoute({ children, ...rest }: Props) {\n    let auth = useAuth();\n    // useEffect(() => {\n    //     axios.get('/tasks/isLogin').then(res => {\n    //         auth.loginUser(res.data.result)\n    //     })\n    // })\n\n    return (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                auth.user && !/('')|(\"\")/.test(auth.user) ? (\n                    children\n                ) : (\n                        <Redirect\n                            to={{\n                                pathname: `/player/loginuser`,\n                                search: `?r=${location.pathname}`,\n                                state: { from: location }\n                            }}\n                        />\n                    )\n            }\n        />\n    );\n}\n\nexport { useAuth, ProvideAuth, PrivateRoute } ",{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","severity":1,"message":"72","line":1,"column":17,"nodeType":"73","messageId":"74","endLine":1,"endColumn":30},{"ruleId":"71","severity":1,"message":"75","line":1,"column":32,"nodeType":"73","messageId":"74","endLine":1,"endColumn":42},{"ruleId":"71","severity":1,"message":"76","line":6,"column":3,"nodeType":"73","messageId":"74","endLine":6,"endColumn":11},{"ruleId":"71","severity":1,"message":"77","line":7,"column":3,"nodeType":"73","messageId":"74","endLine":7,"endColumn":16},{"ruleId":"71","severity":1,"message":"78","line":13,"column":16,"nodeType":"73","messageId":"74","endLine":13,"endColumn":21},{"ruleId":"71","severity":1,"message":"79","line":18,"column":19,"nodeType":"73","messageId":"74","endLine":18,"endColumn":29},{"ruleId":"71","severity":1,"message":"80","line":1,"column":31,"nodeType":"73","messageId":"74","endLine":1,"endColumn":39},{"ruleId":"71","severity":1,"message":"81","line":1,"column":50,"nodeType":"73","messageId":"74","endLine":1,"endColumn":53},{"ruleId":"71","severity":1,"message":"82","line":1,"column":55,"nodeType":"73","messageId":"74","endLine":1,"endColumn":58},{"ruleId":"71","severity":1,"message":"83","line":5,"column":22,"nodeType":"73","messageId":"74","endLine":5,"endColumn":28},{"ruleId":"71","severity":1,"message":"84","line":6,"column":5,"nodeType":"73","messageId":"74","endLine":6,"endColumn":11},{"ruleId":"71","severity":1,"message":"85","line":7,"column":5,"nodeType":"73","messageId":"74","endLine":7,"endColumn":10},{"ruleId":"71","severity":1,"message":"86","line":8,"column":5,"nodeType":"73","messageId":"74","endLine":8,"endColumn":9},{"ruleId":"71","severity":1,"message":"76","line":10,"column":5,"nodeType":"73","messageId":"74","endLine":10,"endColumn":13},{"ruleId":"71","severity":1,"message":"87","line":13,"column":10,"nodeType":"73","messageId":"74","endLine":13,"endColumn":18},{"ruleId":"71","severity":1,"message":"88","line":17,"column":9,"nodeType":"73","messageId":"74","endLine":17,"endColumn":16},{"ruleId":"89","severity":1,"message":"90","line":28,"column":8,"nodeType":"91","endLine":28,"endColumn":10,"suggestions":"92"},{"ruleId":"71","severity":1,"message":"80","line":1,"column":31,"nodeType":"73","messageId":"74","endLine":1,"endColumn":39},{"ruleId":"71","severity":1,"message":"81","line":1,"column":50,"nodeType":"73","messageId":"74","endLine":1,"endColumn":53},{"ruleId":"71","severity":1,"message":"82","line":1,"column":55,"nodeType":"73","messageId":"74","endLine":1,"endColumn":58},{"ruleId":"71","severity":1,"message":"93","line":2,"column":10,"nodeType":"73","messageId":"74","endLine":2,"endColumn":22},{"ruleId":"71","severity":1,"message":"94","line":2,"column":24,"nodeType":"73","messageId":"74","endLine":2,"endColumn":36},{"ruleId":"71","severity":1,"message":"83","line":5,"column":22,"nodeType":"73","messageId":"74","endLine":5,"endColumn":28},{"ruleId":"71","severity":1,"message":"84","line":6,"column":5,"nodeType":"73","messageId":"74","endLine":6,"endColumn":11},{"ruleId":"71","severity":1,"message":"85","line":7,"column":5,"nodeType":"73","messageId":"74","endLine":7,"endColumn":10},{"ruleId":"71","severity":1,"message":"86","line":8,"column":5,"nodeType":"73","messageId":"74","endLine":8,"endColumn":9},{"ruleId":"71","severity":1,"message":"76","line":10,"column":5,"nodeType":"73","messageId":"74","endLine":10,"endColumn":13},{"ruleId":"71","severity":1,"message":"95","line":15,"column":10,"nodeType":"73","messageId":"74","endLine":15,"endColumn":19},{"ruleId":"71","severity":1,"message":"88","line":22,"column":9,"nodeType":"73","messageId":"74","endLine":22,"endColumn":16},{"ruleId":"71","severity":1,"message":"96","line":1,"column":32,"nodeType":"73","messageId":"74","endLine":1,"endColumn":41},{"ruleId":"71","severity":1,"message":"83","line":3,"column":22,"nodeType":"73","messageId":"74","endLine":3,"endColumn":28},{"ruleId":"71","severity":1,"message":"84","line":4,"column":5,"nodeType":"73","messageId":"74","endLine":4,"endColumn":11},{"ruleId":"71","severity":1,"message":"86","line":6,"column":5,"nodeType":"73","messageId":"74","endLine":6,"endColumn":9},{"ruleId":"71","severity":1,"message":"97","line":7,"column":5,"nodeType":"73","messageId":"74","endLine":7,"endColumn":15},"no-native-reassign",["98"],"no-negated-in-lhs",["99"],"@typescript-eslint/no-unused-vars","'createContext' is defined but never used.","Identifier","unusedVar","'useContext' is defined but never used.","'Redirect' is defined but never used.","'BrowserRouter' is defined but never used.","'Space' is defined but never used.","'setLoading' is assigned a value but never used.","'Checkbox' is defined but never used.","'Row' is defined but never used.","'Col' is defined but never used.","'Router' is defined but never used.","'Switch' is defined but never used.","'Route' is defined but never used.","'Link' is defined but never used.","'useState' is defined but never used.","'history' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'appid' and 'r'. Either include them or remove the dependency array.","ArrayExpression",["100"],"'UserOutlined' is defined but never used.","'LockOutlined' is defined but never used.","'getCookie' is defined but never used.","'useEffect' is defined but never used.","'useHistory' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"101","fix":"102"},"Update the dependencies array to be: [appid, r]",{"range":"103","text":"104"},[715,717],"[appid, r]"]